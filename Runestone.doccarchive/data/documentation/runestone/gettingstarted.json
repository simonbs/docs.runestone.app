{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Installation","level":2,"type":"heading","text":"Installation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Runestone is distributed using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.swift.org\/package-manager\/"},{"type":"text","text":". Install it in a project by adding it as a dependency in your Package.swift manifest or through “Package Dependencies” in  project settings."}]},{"type":"codeListing","syntax":"swift","code":["let package = Package(","    dependencies: [","        .package(url: \"git@github.com:simonbs\/Runestone.git\", from: \"0.1.0\")","    ]",")"]},{"anchor":"Usage","level":2,"type":"heading","text":"Usage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following steps describe how to add a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":" to an app and start syntax highlighting text."}]},{"anchor":"1.-Create-a-TextView","level":4,"type":"heading","text":"1. Create a TextView"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":" is a subclass of UIScrollView and as such can be initialized like any other view. It has an API that is very similar to the one of UITextView."}]},{"type":"codeListing","syntax":"swift","code":["let textView = TextView()","view.addSubView(textView)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The text view can be customized in a variety of ways. The following code snippet shows how to enable line numbers, show the selected line, add a page guide, show invisible characters and adjust the line-height. Refer to the documentation of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":" for a full overview of the settings."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Shiw line numbers.","textView.showLineNumbers = true","\/\/ Highlight the selected line.","textView.lineSelectionDisplayType = .line","\/\/ Show a page guide after the 80th character.","textView.showPageGuide = true","textView.pageGuideColumn = 80","\/\/ Show all invisible characters.","textView.showTabs = true","textView.showSpaces = true","textView.showLineBreaks = true","textView.showSoftLineBreaks = true","\/\/ Set the line-height to 130%","textView.lineHeightMultiplier = 1.3"]},{"anchor":"2.-Add-a-language","level":4,"type":"heading","text":"2. Add a language"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To start using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":" in an app, you should add the language of the text you would like to syntax highlight. Runestone uses "},{"type":"reference","isActive":true,"identifier":"https:\/\/tree-sitter.github.io\/tree-sitter\/"},{"type":"text","text":", and as such, Tree-sitter languages to syntax highlight text. Runestone does not come with any languages by default. Refer to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/AddingATreeSitterLanguage"},{"type":"text","text":" article for information on how to add a language to your app."}]},{"anchor":"3.-Add-a-theme","level":4,"type":"heading","text":"3. Add a theme"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The next step is to add a theme to your app. Runestone uses the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/Theme"},{"type":"text","text":" protocol to customize the appearance of a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":". Refer to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/CreatingATheme"},{"type":"text","text":" article for information on how to add a theme to your app."}]},{"anchor":"4.-Set-the-state-of-the-text-view","level":4,"type":"heading","text":"4. Set the state of the text view"},{"type":"paragraph","inlineContent":[{"type":"text","text":"After adding a language and a theme to your app, you are ready to set the language and theme on the text view."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can set the language, theme, and text on your text view using the appropriate getters on an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":". However, setting the language or text is an expensive operation as it requires processing the visible part of the text. Therefore it is recommended that you initialise an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewState"},{"type":"text","text":" and pass it to the text view using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView\/setState(_:addUndoAction:)"},{"type":"text","text":", as instances of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewState"},{"type":"text","text":" can be created on a background queue and do most of the heavy work without blocking the main thread."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Assuming you have added a language to your app using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/simonbs\/TreeSitterLanguages"},{"type":"text","text":" packages, you can create an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewState"},{"type":"text","text":" as shown below. If you have manually added a language to your app, then refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/AddingATreeSitterLanguage"},{"type":"text","text":" for information on how to set the state of your text view."}]},{"type":"codeListing","syntax":"swift","code":["DispatchQueue.global(qos: .userInitiated) {","    \/\/ Initialize of TextViewState on a background queue to due avoid blocking the main thread.","    let text = \"let foo = \\\"Hello World\\\"\"","    let state = TextViewState(text: text, theme: ColorfulTheme(), language: .javaScript)","    DispatchQueue.main.async {","        \/\/ setState(_:) should be called on the main thread.","        textView.setState(state)","    }","}"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The above code snippet is only meant as an example. Please take care when offloading work to a background queue and cancel work that is no longer needed."}]}]},{"anchor":"5.-Next-steps","level":4,"type":"heading","text":"5. Next steps"},{"type":"paragraph","inlineContent":[{"type":"text","text":"At this point, you should have a fully functioning text view with support for syntax highlighting and other popular code editing features in your app."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You will likely want to set a delegate on your "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView"},{"type":"text","text":" instance to handle text being edited. Take a look at the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView\/editorDelegate"},{"type":"text","text":" property and the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewDelegate"},{"type":"text","text":" to start responding to events sent by the text view."}]}]}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/runestone\/gettingstarted"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Runestone\/documentation\/Runestone\/GettingStarted","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Installing Runestone and setting up a text view."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Getting Started","role":"article","modules":[{"name":"Runestone"}]},"hierarchy":{"paths":[["doc:\/\/Runestone\/documentation\/Runestone"]]},"seeAlsoSections":[{"title":"Essentials","identifiers":["doc:\/\/Runestone\/documentation\/Runestone\/TextView","doc:\/\/Runestone\/documentation\/Runestone\/TextViewDelegate","doc:\/\/Runestone\/documentation\/Runestone\/TextViewState"],"generated":true}],"references":{"doc://Runestone/documentation/Runestone/TextView/editorDelegate":{"role":"symbol","title":"editorDelegate","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"editorDelegate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TextViewDelegate","preciseIdentifier":"s:9Runestone16TextViewDelegateP"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Delegate to receive callbacks for events triggered by the editor."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView\/editorDelegate","kind":"symbol","type":"topic","url":"\/documentation\/runestone\/textview\/editordelegate"},"doc://Runestone/documentation/Runestone/Theme":{"role":"symbol","title":"Theme","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Theme"}],"abstract":[{"type":"text","text":"Fonts and colors to be used by a "},{"type":"codeVoice","code":"TextView"},{"type":"text","text":"."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/Theme","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Theme"}],"url":"\/documentation\/runestone\/theme"},"https://www.swift.org/package-manager/":{"title":"Swift Package Manager","titleInlineContent":[{"type":"text","text":"Swift Package Manager"}],"type":"link","identifier":"https:\/\/www.swift.org\/package-manager\/","url":"https:\/\/www.swift.org\/package-manager\/"},"doc://Runestone/documentation/Runestone":{"role":"collection","title":"Runestone","abstract":[{"type":"text","text":"Performant code editor with syntax highlighting, line numbers, invisible characters and much more."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone","kind":"symbol","type":"topic","url":"\/documentation\/runestone"},"doc://Runestone/documentation/Runestone/TextView/setState(_:addUndoAction:)":{"role":"symbol","title":"setState(_:addUndoAction:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"setState"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"TextViewState","preciseIdentifier":"s:9Runestone13TextViewStateC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"addUndoAction"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Sets the current "},{"type":"emphasis","inlineContent":[{"type":"text","text":"state"}]},{"type":"text","text":" of the editor. The state contains the text to be displayed by the editor and"},{"type":"text","text":" "},{"type":"text","text":"various additional information about the text that the editor needs to show the text."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView\/setState(_:addUndoAction:)","kind":"symbol","type":"topic","url":"\/documentation\/runestone\/textview\/setstate(_:addundoaction:)"},"doc://Runestone/documentation/Runestone/TextViewState":{"role":"symbol","title":"TextViewState","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"TextViewState"}],"abstract":[{"type":"text","text":"Encapsulates the bare informations needed to do syntax highlighting in a text view."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewState","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TextViewState"}],"url":"\/documentation\/runestone\/textviewstate"},"doc://Runestone/documentation/Runestone/TextViewDelegate":{"role":"symbol","title":"TextViewDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TextViewDelegate"}],"abstract":[{"type":"text","text":"The methods for receiving editing-related messages for the text view."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextViewDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TextViewDelegate"}],"url":"\/documentation\/runestone\/textviewdelegate"},"https://github.com/simonbs/TreeSitterLanguages":{"title":"TreeSitterLanguages","titleInlineContent":[{"type":"text","text":"TreeSitterLanguages"}],"type":"link","identifier":"https:\/\/github.com\/simonbs\/TreeSitterLanguages","url":"https:\/\/github.com\/simonbs\/TreeSitterLanguages"},"doc://Runestone/documentation/Runestone/TextView":{"role":"symbol","title":"TextView","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"TextView"}],"abstract":[{"type":"text","text":"A type similiar to UITextView with features commonly found in code editors."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/TextView","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TextView"}],"url":"\/documentation\/runestone\/textview"},"doc://Runestone/documentation/Runestone/AddingATreeSitterLanguage":{"role":"article","title":"Adding a Tree-sitter Language","abstract":[{"type":"text","text":"Learn how to add one of Tree-sitter’s many supported language and start syntax highlighting text."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/AddingATreeSitterLanguage","kind":"article","type":"topic","url":"\/documentation\/runestone\/addingatreesitterlanguage"},"doc://Runestone/documentation/Runestone/CreatingATheme":{"role":"article","title":"Creating a Theme","abstract":[{"type":"text","text":"Learn how to create a theme and customize the appearance of TextView."}],"identifier":"doc:\/\/Runestone\/documentation\/Runestone\/CreatingATheme","kind":"article","type":"topic","url":"\/documentation\/runestone\/creatingatheme"},"https://tree-sitter.github.io/tree-sitter/":{"title":"Tree-sitter","titleInlineContent":[{"type":"text","text":"Tree-sitter"}],"type":"link","identifier":"https:\/\/tree-sitter.github.io\/tree-sitter\/","url":"https:\/\/tree-sitter.github.io\/tree-sitter\/"}}}